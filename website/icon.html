<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Icon Details</title>
  <link rel="icon" type="image/x-icon" href="../assets/favicon.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <link href="style-dark.css" rel="stylesheet" id="theme-link">
  <link href="iconPage.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/bookingjini-labs/bookingjini-icons@1.0.0/font-css.css" rel="stylesheet">
  <script src="anime.min.js"></script>
  <link rel="stylesheet" href="iziToast.min.css">
  <script src="iziToast.min.js" type="text/javascript"></script>
  <link rel="stylesheet" href="responsive.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Alegreya:ital,wght@1,500&family=Arvo:ital,wght@0,700;1,400&display=swap"
  rel="stylesheet">
   
</head>

<body style="background-color: aliceblue;">


  <div class="container">
    <div class="icon-wrapper"  id="iconContainer">
      <i class="icon" id="clickedIcon"></i>
      
    </div>
    <div class="options">
      <h1 class="icon-title" id="iconTitle">icon name</h1>
      <!-- <button class="btn btn-copy" onclick="copyIconCode('svg')">Copy Icon Code (SVG)</button> -->
    <button class="btn btn-copy" onclick="copyIconCode('html')">Copy Icon Code (HTML)</button>
      <!-- <button class="btn btn-copy" onclick="copyIconCode()">Copy Icon Code</button> -->
      <a class="btn btn-download" onclick="downloadIcon()" download>Download Icon</a>
      <input type="color" id="backgroundColor" value="#ffffff" onchange="updateIconStyles()"> Background color
      <input type="color" id="iconColor" value="#000000" onchange="updateIconStyles()"> Icon color
      <label>
        <input type="checkbox" id="transparentBackground" onchange="updateIconStyles()"> Transparent Background
      </label>
    </div>
  </div>
<button class="btn done-button" onclick="saveChanges()">Done</button>

  <script>

    // var urlParams = new URLSearchParams(window.location.search);
    // var clickedIcon = urlParams.get('icon');
    // var iconName = urlParams.get('name');

    
    // var iconContainer = document.getElementById('iconContainer');
    // iconContainer.innerHTML = clickedIcon;

    // var iconTitle = document.getElementById('iconTitle');
    // iconTitle.textContent = iconName;

var urlParams = new URLSearchParams(window.location.search);
var encodedIcon = urlParams.get('icon');
var decodedIcon = decodeURIComponent(encodedIcon);

// Extract the icon name from the decoded icon HTML
var iconName = extractIconName(decodedIcon);

// Display the clicked icon
var iconContainer = document.getElementById('iconContainer');
iconContainer.innerHTML = decodedIcon;

var iconTitle = document.getElementById('iconTitle');
iconTitle.textContent = iconName;

function extractIconName(iconHTML) {
  // Extract the class attribute value from the icon HTML
  var classAttribute = /class="([^"]+)"/.exec(iconHTML)[1];
  
  // Extract the icon name from the class attribute
  var iconName = classAttribute.replace('jini-', '').replace(/-/g, ' ');
  
  return iconName;
}


    // Function to copy the icon code to the clipboard
    // function copyIconCode(icon) {
    //   const tempElement = document.createElement('textarea');
    //   tempElement.value = clickedIcon;
    //   document.body.appendChild(tempElement);
    //   tempElement.select();
    //   document.execCommand('copy');
    //   document.body.removeChild(tempElement);
    //     iziToast.success({
    //       timeout: 5000,
    //       position: 'bottomCenter',
    //       progressBar: false,
    //       message: 'Icon Copied!'
    //     });
    
    // }

function copyIconCode() {
  // Retrieve the icon value from the URL parameter
  var urlParams = new URLSearchParams(window.location.search);
  var clickedIcon = decodeURIComponent(urlParams.get('icon'));

  // Create a temporary element to hold the SVG code
  var tempElement = document.createElement('div');
  tempElement.innerHTML = clickedIcon;

  // Retrieve the SVG code from the temporary element
  var svgCode = tempElement.firstChild.outerHTML;
  var htmlCode = tempElement.firstChild.innerHTML;

  // Copy the SVG code to the clipboard
  navigator.clipboard.writeText(svgCode)
    .then(function() {
      iziToast.success({
        timeout: 5000,
        position: 'bottomCenter',
        progressBar: false,
        message: 'SVG Code Copied!'
      });
    })
    .catch(function() {
      iziToast.error({
        timeout: 5000,
        position: 'bottomCenter',
        progressBar: false,
        message: 'Failed to copy SVG code!'
      });
    });
}



     function downloadIcon() {
      // Retrieve the icon value from localStorage or URL parameter
      var clickedIcon = localStorage.getItem('clickedIcon') || getIconFromURLParams();

      // Create a temporary anchor element
      var link = document.createElement('a');
      link.href = 'https://cdn.jsdelivr.net/gh/bookingjini-labs/bookingjini-icons@1.0.0/font-css.css' + clickedIcon; // Set the download URL for the icon

      // Trigger the click event to start the download
      link.click();
    }

 function updateIconStyles() {
      // Retrieve the icon element
      var iconElement = document.getElementById('iconContainer'); // Replace 'iconElementId' with the actual ID of your icon element

      // Retrieve the selected values from user input
      var backgroundColor = document.getElementById('backgroundColor').value;
      var iconColor = document.getElementById('iconColor').value;
      var isTransparentBackground = document.getElementById('transparentBackground').checked;

      // Apply the selected styles to the icon element
      iconElement.style.backgroundColor = isTransparentBackground ? 'transparent' : backgroundColor;
      iconElement.style.color = iconColor;
    }

function saveChanges() {
      // Retrieve the selected values from user input
      var backgroundColor = document.getElementById('backgroundColor').value;
      var iconColor = document.getElementById('iconColor').value;
      var isTransparentBackground = document.getElementById('transparentBackground').checked;

      alert('Changes saved successfully!');
    }

    // Rest of your customization code...
 updateIconStyles();
  </script>
</body>

</html>
